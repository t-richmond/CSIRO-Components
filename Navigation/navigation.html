<!DOCTYPE html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
  <link rel="stylesheet" href="navigation.css">
</head>
<body>

<div class="container">
  <div id="navigation-parent">
    <div class="navigation__container">
        <div class="logo__container">
          <a href="#">
            <img class='logo__image' src="logo.svg"/>
          </a>
          <span class="logo__title">Education and Outreach Portal</span>
        </div>
        <div class="link__container">
          <nav class="signIn__content">
            <a class="navigation__link" href="sign-in">Sign in</a>
          </nav>
          <button class="menu__button" onclick="handleMobileClick()">
            <svg class="open" width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M26.6667 7.16666C27.403 7.16666 28 7.76361 28 8.49999C28 9.18377 27.4853 9.74733 26.8222 9.82435L26.6667 9.83332H5.33333C4.59695 9.83332 4 9.23637 4 8.49999C4 7.81621 4.51472 7.25265 5.17784 7.17563L5.33333 7.16666H26.6667ZM26.6667 15.1666C27.403 15.1666 28 15.7636 28 16.5C28 17.1838 27.4853 17.7473 26.8222 17.8243L26.6667 17.8333H5.33333C4.59695 17.8333 4 17.2363 4 16.5C4 15.8162 4.51472 15.2526 5.17784 15.1756L5.33333 15.1666H26.6667ZM28 24.5C28 23.7636 27.403 23.1666 26.6667 23.1666H5.33333L5.17784 23.1756C4.51472 23.2526 4 23.8162 4 24.5C4 25.2363 4.59695 25.8333 5.33333 25.8333H26.6667L26.8222 25.8243C27.4853 25.7473 28 25.1838 28 24.5Z" fill="#004B87"/>
              </svg>
              <svg class="close" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M6.6129 5.2097C6.22061 4.90468 5.65338 4.93241 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929L5.2097 17.3871C4.90468 17.7794 4.93241 18.3466 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071L17.3871 18.7903C17.7794 19.0953 18.3466 19.0676 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711L18.7903 6.6129C19.0953 6.22061 19.0676 5.65338 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289L6.6129 5.2097Z" fill="#004B87"/>
                </svg>
          </button>
          <nav class="link__content"></nav>
          <nav class="util__content">
            <a href="profile">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M16 2.66675C12.3181 2.66675 9.33335 5.65152 9.33335 9.33342C9.33335 13.0153 12.3181 16.0001 16 16.0001C19.6819 16.0001 22.6667 13.0153 22.6667 9.33342C22.6667 5.65152 19.6819 2.66675 16 2.66675ZM16 5.33341C18.2092 5.33341 20 7.12427 20 9.33341C20 11.5425 18.2092 13.3334 16 13.3334C13.7909 13.3334 12 11.5425 12 9.33341C12 7.12427 13.7909 5.33341 16 5.33341ZM25.3272 25.0442C25.1758 21.4965 22.2517 18.6667 18.6667 18.6667H13.3334L13.0442 18.6729C9.49643 18.8243 6.66669 21.7484 6.66669 25.3334V28.0001L6.67566 28.1556C6.75268 28.8187 7.31624 29.3334 8.00002 29.3334C8.7364 29.3334 9.33335 28.7365 9.33335 28.0001V25.3334L9.34014 25.0984C9.46181 22.9986 11.2031 21.3334 13.3334 21.3334H18.6667L18.9017 21.3402C21.0015 21.4619 22.6667 23.2032 22.6667 25.3334V28.0001L22.6757 28.1556C22.7527 28.8187 23.3162 29.3334 24 29.3334C24.7364 29.3334 25.3334 28.7365 25.3334 28.0001V25.3334L25.3272 25.0442Z" fill="#004B87"/>
                </svg>
            </a>
            <a href="notifications">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M16 2.66675C17.8936 2.66675 19.4798 3.98248 19.8944 5.74958L19.9053 5.80675C22.9863 7.54149 25.0154 10.6952 25.3086 14.281L25.3334 14.6667V18.5747L25.362 18.7566C25.5615 19.831 26.1926 20.7776 27.1076 21.375L27.3237 21.5065C28.47 22.1557 28.0711 23.8619 26.8208 23.9922L26.6667 24.0001L21.3333 24.0001C21.3333 26.9456 18.9455 29.3334 16 29.3334C13.1437 29.3334 10.8119 27.0881 10.6732 24.2663L10.6667 24.0001L5.33335 24.0001C3.96331 24.0001 3.48418 22.1816 4.67635 21.5065C5.70779 20.9224 6.42315 19.9136 6.63803 18.7566L6.66668 18.5654L6.66815 14.6042C6.8352 11.0453 8.7639 7.83213 11.7633 6.00106L12.0934 5.80675L12.1057 5.74958C12.503 4.05611 13.9763 2.77718 15.765 2.67354L16 2.66675ZM13.3333 24.0001C13.3333 25.4728 14.5272 26.6667 16 26.6667C17.4058 26.6667 18.5576 25.5789 18.6594 24.1991L18.6667 24.0001H13.3333ZM20 21.3334H12H8.49202L8.68206 20.9794C9.01209 20.3117 9.2319 19.5853 9.3237 18.827L9.33336 18.6667V14.6667L9.35524 14.3464C9.6021 11.5806 11.3279 9.08991 13.9134 7.86674L14.0401 7.79754L14.1646 7.70959C14.283 7.61541 14.3824 7.50318 14.4608 7.3789L14.5312 7.25311C14.5963 7.12039 14.6399 6.97527 14.6577 6.82224L14.6757 6.51125C14.7527 5.84813 15.3162 5.33341 16 5.33341C16.7364 5.33341 17.3334 5.93036 17.3334 6.66674L17.3442 6.83662C17.4015 7.28357 17.6824 7.6762 18.0967 7.87211C20.7712 9.13675 22.5295 11.7741 22.6682 14.7293L22.6667 18.6667L22.6764 18.827L22.7246 19.1566C22.8561 19.9207 23.1182 20.6474 23.4921 21.3083L23.5067 21.3334H20Z" fill="#004B87"/>
                </svg>
            </a>
          </nav>
        </div>
    </div>
    <div class="mobileNav__container">
      <nav class="mobileUtil__content">
        <a href="profile">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 2.66675C12.3181 2.66675 9.33335 5.65152 9.33335 9.33342C9.33335 13.0153 12.3181 16.0001 16 16.0001C19.6819 16.0001 22.6667 13.0153 22.6667 9.33342C22.6667 5.65152 19.6819 2.66675 16 2.66675ZM16 5.33341C18.2092 5.33341 20 7.12427 20 9.33341C20 11.5425 18.2092 13.3334 16 13.3334C13.7909 13.3334 12 11.5425 12 9.33341C12 7.12427 13.7909 5.33341 16 5.33341ZM25.3272 25.0442C25.1758 21.4965 22.2517 18.6667 18.6667 18.6667H13.3334L13.0442 18.6729C9.49643 18.8243 6.66669 21.7484 6.66669 25.3334V28.0001L6.67566 28.1556C6.75268 28.8187 7.31624 29.3334 8.00002 29.3334C8.7364 29.3334 9.33335 28.7365 9.33335 28.0001V25.3334L9.34014 25.0984C9.46181 22.9986 11.2031 21.3334 13.3334 21.3334H18.6667L18.9017 21.3402C21.0015 21.4619 22.6667 23.2032 22.6667 25.3334V28.0001L22.6757 28.1556C22.7527 28.8187 23.3162 29.3334 24 29.3334C24.7364 29.3334 25.3334 28.7365 25.3334 28.0001V25.3334L25.3272 25.0442Z" fill="#004B87"/>
            </svg>
        </a>
        <a href="notifications">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 2.66675C17.8936 2.66675 19.4798 3.98248 19.8944 5.74958L19.9053 5.80675C22.9863 7.54149 25.0154 10.6952 25.3086 14.281L25.3334 14.6667V18.5747L25.362 18.7566C25.5615 19.831 26.1926 20.7776 27.1076 21.375L27.3237 21.5065C28.47 22.1557 28.0711 23.8619 26.8208 23.9922L26.6667 24.0001L21.3333 24.0001C21.3333 26.9456 18.9455 29.3334 16 29.3334C13.1437 29.3334 10.8119 27.0881 10.6732 24.2663L10.6667 24.0001L5.33335 24.0001C3.96331 24.0001 3.48418 22.1816 4.67635 21.5065C5.70779 20.9224 6.42315 19.9136 6.63803 18.7566L6.66668 18.5654L6.66815 14.6042C6.8352 11.0453 8.7639 7.83213 11.7633 6.00106L12.0934 5.80675L12.1057 5.74958C12.503 4.05611 13.9763 2.77718 15.765 2.67354L16 2.66675ZM13.3333 24.0001C13.3333 25.4728 14.5272 26.6667 16 26.6667C17.4058 26.6667 18.5576 25.5789 18.6594 24.1991L18.6667 24.0001H13.3333ZM20 21.3334H12H8.49202L8.68206 20.9794C9.01209 20.3117 9.2319 19.5853 9.3237 18.827L9.33336 18.6667V14.6667L9.35524 14.3464C9.6021 11.5806 11.3279 9.08991 13.9134 7.86674L14.0401 7.79754L14.1646 7.70959C14.283 7.61541 14.3824 7.50318 14.4608 7.3789L14.5312 7.25311C14.5963 7.12039 14.6399 6.97527 14.6577 6.82224L14.6757 6.51125C14.7527 5.84813 15.3162 5.33341 16 5.33341C16.7364 5.33341 17.3334 5.93036 17.3334 6.66674L17.3442 6.83662C17.4015 7.28357 17.6824 7.6762 18.0967 7.87211C20.7712 9.13675 22.5295 11.7741 22.6682 14.7293L22.6667 18.6667L22.6764 18.827L22.7246 19.1566C22.8561 19.9207 23.1182 20.6474 23.4921 21.3083L23.5067 21.3334H20Z" fill="#004B87"/>
            </svg>
        </a>
      </nav>
      <nav class="mobileLink__content">
      </nav>
    </div>
  </div>
</div>
</body>
</html>

<script>
   const dummyLinkArray = [
    {
      link: '/home',
      value: 'Home'
    },
    {
      link: '/applications',
      value: 'My applications'
    },
    {
      link: '/programs',
      value: 'My programs'
    },
    {
      link: '/enquiries',
      value: 'My enquiries'
    },
    {
      link: '/contact',
      value: 'Contact us'
    },
  ]

  // Need to replace with dynamics logic to determine if the user is signed in
  const isUserSignedIn = true
  const linkContentElement = document.getElementsByClassName('link__content')[0]
  const utilContentElement = document.getElementsByClassName('util__content')[0]
  const signInElement = document.getElementsByClassName('signIn__content')[0]
  const menuButtonElement = document.getElementsByClassName('menu__button')[0]
  let isMobileVisible = false
  const mobileNavElement = document.getElementsByClassName('mobileNav__container')[0]
  const openIcon = document.getElementsByClassName('open')[0]
  openIcon.style.display = 'flex'
  const closeIcon = document.getElementsByClassName('close')[0]
  const mobileLinkElement = document.getElementsByClassName('mobileLink__content')[0]


  // Map over elements and dynanmically create main nav
  dummyLinkArray.map((item) => {
    // Element target
    let anchor = document.createElement('a')
    let mobileAnchor = document.createElement('a')

    //Aria tags
    anchor.ariaLabel = item.value;
    anchor.ariaRoleDescription = 'link'
    mobileAnchor.ariaLabel = `mobile-link-${item.value}`
    mobileAnchor.ariaRoleDescription = 'link'

    //Populate attributes
    anchor.className = 'navigation__link'
    mobileAnchor.className = 'navigation__link'
    anchor.id = item.link.split('/')[1];
    mobileAnchor.id = `${item.link.split('/')[1]}-mobile`;
    anchor.href = item.link;
    mobileAnchor.href= item.link;
    anchor.innerHTML = item.value;
    mobileAnchor.innerHTML = item.value;

    //Append mobile links
    mobileLinkElement.appendChild(mobileAnchor)
    //Append desktop links
    linkContentElement.appendChild(anchor)
  })

  const handleMobileClick = () => {
    isMobileVisible = !isMobileVisible
    if(isMobileVisible){
      mobileNavElement.style.display = 'flex'
      document.body.classList.add('-lock')
      mobileNavElement.classList.add('-slideDown')
      mobileNavElement.classList.remove('-slideUp')
      openIcon.style.display = 'none'
      closeIcon.style.display = 'flex'

    }else{
      document.body.classList.remove('-lock')
      mobileNavElement.classList.add('-slideUp')
      mobileNavElement.classList.remove('-slideDown')
      openIcon.style.display = 'flex'
      closeIcon.style.display = 'none'
    }
  }


  const handleViewPortChange = () => {
    //* If user is signed in under 1250 px
    if(window.innerWidth < 1250 && isUserSignedIn){
      utilContentElement.style.display = 'none'
      linkContentElement.style.display = 'none'
      menuButtonElement.style.display = 'flex'
    }
    //If they are signed in over 1250 px
    else if(isUserSignedIn){
      utilContentElement.style.display = 'flex'
      linkContentElement.style.display = 'flex'
      menuButtonElement.style.display = 'none'
      document.body.classList.remove('-lock')
      mobileNavElement.style.display = 'none'
      isMobileVisible = false
      openIcon.style.display = 'flex'
      closeIcon.style.display = 'none'

    }
    //If they are not signed in
    else{
      utilContentElement.style.display = 'none'
      linkContentElement.style.display = 'none'
      menuButtonElement.style.display = 'none'
    }
  }

  //Assign custom style (bottom border) to active nav item
  const getActiveElement = () => {
    // replace static var with window.location.pathname and extract the query slug (may need to be a different index than 1)
    const activeElementPath = '/applications'
    const activeId = activeElementPath.split('/')[1]
    const activeMobileId = `${activeElementPath.split('/')[1]}-mobile`
    const active = document.getElementById(activeId)
    const activeMobile = document.getElementById(activeMobileId)
    //* only add the active flag if element exists (removes type err which stops rest of js running)
    active && document.getElementById(activeId).classList.add('-active');
    activeMobile && document.getElementById(activeMobileId).classList.add('-active')
  }

  // We may not need this logic if this will not be supported with OOTB
  if(isUserSignedIn){
    signInElement.style.display = 'none'
  }else{
    utilContentElement.style.display = 'none'
    linkContentElement.style.display = 'none'
  }


document.addEventListener('click', event => {
  const isClickInside = document.getElementById('navigation-parent').contains(event.target)

  if (!isClickInside) {
    if(isMobileVisible){
      mobileNavElement.classList.add('-slideUp')
      mobileNavElement.classList.remove('-slideDown')
      document.body.classList.remove('-lock')
      isMobileVisible = false
      openIcon.style.display = 'flex'
      closeIcon.style.display = 'none'
    }
  }
})

  getActiveElement();
  handleViewPortChange();
  window.addEventListener('resize', handleViewPortChange)

</script>


